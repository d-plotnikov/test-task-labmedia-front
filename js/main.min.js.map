{"version":3,"sources":["api.js","deleteUser.js","main.js","paginate.js","renderUser.js","rerenderApp.js","search.js","sortable.js"],"names":["api","fetch","then","res","ok","json","alert","userData","data","deleteUser","deleteItem","querySelectorAll","forEach","item","idx","attr","classList","add","modal","modalBtn","remove","addEventListener","id","userSearch","filter","rerenderApp","userList","searchInput","document","querySelector","searchResetBtn","sortableBtnDate","sortableBtnRating","template","content","element","pageCounter","pagination","perPage","keyUser","countPage","setTimeout","paginateRender","length","pageItem","fragment","appendChild","paginate","i","clickPagination","cloneNode","textContent","paginationBtn","contains","e","index","target","innerHTML","stepPaginate","renderUserList","createDocumentFragment","userItem","date","registration_date","split","setAttribute","rating","username","email","getOptions","word","u","RegExp","match","regex","displayOptions","value","preventDefault","event","numberFormat","arr","join","sort","a","b","toggle"],"mappings":"aAAA,IAAMA,IAAG,oDAATC,MAAMD,KAEDE,KAAK,SAAAC,GAEEA,GAAMA,EAAEC,GACDD,OAAQA,EAAEE,OAEXC,MAAA,4BAIVC,KAAQ,SAAAC,GAEVD,SAAAC;aCbN,SAASC,WAAWD,GAApB,IAEQE,EAFYF,SAAMG,iBAAA,mBAKXC,QAAQ,SAAAC,EAAAC,GAGXC,EAAOF,iBAAiB,QAAC,WACnBG,EAAAA,EAAUC,aAAI,aACtBC,MAAAF,UAAAC,IAAA,oBAINE,SAKiBP,QAACI,SAAAA,EAAUI,GAEhBF,EAAKG,iBAAiB,QAAC,WACSC,GAATR,EAAoBI,MAAAF,UAAAI,OAAA,iBAE3CG,MAAaA,UAAWC,OAAO,gBAAIhB,EAASc,EAAMP,OAAI,SAAAF,GAAA,OAAAA,EAAAS,IAAAP,IAACR,SAAAC,EACvDiB,WAAiBF,WAAAC,OAAA,SAAAX,GAAA,OAAAA,EAAAS,IAAAP,IACrBU,YAAAjB;AC1BZ,aAEA,IAUID,SAIAmB,SACAH,WAfAI,YAAcC,SAASC,cAAc,oBACrCC,eAAiBF,SAASC,cAAc,wBACxCE,gBAAkBH,SAASC,cAAc,yBACzCG,kBAAoBJ,SAASC,cAAc,2BAC3CX,MAAQU,SAASC,cAAc,aAC/BV,SAAWS,SAASjB,iBAAiB,iBACrCsB,SAAWL,SAASC,cAAc,aAAaK,QAAQL,cAAc,MACrEM,QAAUP,SAASC,cAAc,aACjCO,YAAcR,SAASC,cAAc,cAAcK,QAAQL,cAAc,MACzEQ,WAAaT,SAASC,cAAc,kBAEpCS,QAAW,EACXC,QAAW,EACXC,UAAa,EAIjBC,WACIlB,WACAE,WAAYlB,SACbkB,YAAIlB,WAAJ;aCtBH,SAASmC,eAAelC,GAAxBkB,SAASgB,EAELhB,UAAWlB,KACXgC,KAAAA,SAAgBG,OAAMjB,GAWtB,IARmBU,EACPQ,EAOPC,EAAYjB,SAAGY,yBAChBK,WAASC,UAAYC,GAGzBV,IAAAA,IAAWS,EAAAA,EAAAA,EAAWN,UAAU,EAAAQ,IAEhCC,EAAeH,aAdIV,EAcFY,EAbLJ,OAAAA,GAAAA,EAACf,YAAcqB,WAAkB,IAClCN,cAAQ,mBAAAO,YAAAH,EACnBJ,IAeAP,WAAIe,YAAgBxB,GAEhBO,kBAHR,SAMYc,kBAEajC,SAAUqC,iBAAS,mBAEnBzC,QAAM,SAAAuB,GAPvBA,EAQYI,iBAAW,QAAA,SAAAe,GACXhB,EAAAA,iBACH,IAAMiB,EAAAD,EAAAE,OAAAC,UAGPH,EAAAE,OAAAxC,UAAAqC,SAAA,oBAGJ,GAAAE,GACFhB,QAAA,EACJD,QAAA,IAPcA,QAAgBoB,EAANH,EACVhB,QADgBmB,GACLH,EAAM,IAGrB9B,YAAYlB;aCzC5B,SAASoD,eAAenD,GAAxBkB,SAASiC,EAAAA,MAAenD,QAAM8B,SA6B9B,IAAAO,EAAAjB,SAAAgC,yBARIzB,QAAQsB,UAAW,GAEnB/B,SAASd,QAAQ,SAACC,EAAMC,GAnBxB,IAAyBkC,EAAExC,EAIfqD,EAGAC,EAaRjB,EAASC,aApBYE,EAoBelC,EApBbN,EAoBkBkB,SAhBjCmC,EAAWE,SAAAA,WAAkBC,GAG7BF,EAACjC,EAAAA,GAAckC,kBAAgBZ,MAAAA,KAAW,GAElDU,EAAShC,cAAc,mBAAuBoC,aAAO,YAAAzD,EAAAwC,GAAA1B,IACrDuC,EAAShC,cAAc,gBAAcsB,YAAoB3C,EAAE0D,GAAMC,SAEjEN,EAAOA,cAAQ,aAAAV,YAAA3C,EAAAwC,GAAAoB,MAEnBP,EAAAhC,cAAA,YAAAsB,YAAAW,EAEIjB,EAAWjB,cAASgC,cAAAA,YAAwBpD,EAAAwC,GAAAkB,OAGvCtD,MAITuB,QAAQW,YAAYD;aC3BxB,SAASpB,YAAYjB,GACjBmD,eAAenD,GADnBkC,eAASjB,GACLkC,WAAAA;aCDJ,SAASU,WAAWC,GAChB,OAAO/C,WAAWC,OAAO,SAAA+C,GAD7B,IAASF,EAAWC,IAAME,OAAAF,EAAA,MACtB,OAAO/C,EAAAA,SAAiBkD,MAACC,KAI7B,SAAAC,eAAAC,GAESD,IAATC,GACQA,eAAY5D,UAAAC,IAAA,+BAEhBV,SAAA8D,WAAAO,GACArE,YAAW8D,UAIf1C,YAAYN,iBAAiB,QAAS,WAClCkB,QAAW,EACXD,QAAW,EACXqC,eAAehD,YAAYiD,SAG/B9C,eACU+C,iBAAgB,QAAA,SAAAC,GACtBnD,EAAAA,iBACAgD,YAAcC,MAACjD,GACfF,eAAYlB,YAASqE,OACrB9C,YAAcvB,UAChBuB,eAAAd,UAAAI,OAAA;aC3BF,SAAS2D,aAAaC,GAIlB,OAJJA,EAASD,OAAAA,EAAYA,MAAM,KAAA,GAAAf,MAAA,KAAAiB,KAAA,KAO3BlD,gBAEIA,iBAA8B,QAAA,WAE9BD,gBAAed,UAAaC,IAAC,2BAC7Be,kBAAmBhB,UAAUI,OAACiC,2BAC1B9C,eAAWA,UAAcU,IAAA,+BACrBc,gBAAkBf,UAAC+C,SAAkB,UAKvCxD,SAAAA,SAAA2E,KAAA,SAAAC,EAAAC,GACN,GAAAL,aAAAI,EAAApB,mBAAAgB,aAAAK,EAAArB,mBAAA,OAAA,IALMxD,SAAAA,SAAA2E,KAAA,SAAAC,EAAAC,GACC,GAAAL,aAAAI,EAAApB,mBAAAgB,aAAAK,EAAArB,mBAAA,OAAA,IAWX/B,gBAAkBX,UAAAA,OAAiB,UAG/BU,YAAAA,YAHJC,kBAMmBzB,iBAAc,QAAK,WAE9ByB,kBAAEhB,UAAAC,IAAA,2BACLc,gBAAMf,UAAAI,OAAA,2BACHb,eAAWA,UAAcU,IAAA,+BACrBc,gBAAgBmC,UAAQb,SAAS,UAO3C9C,SAAAA,SAAA2E,KAAA,SAAAC,EAAAC,GAPU,GAAGD,EAAEjB,OAASkB,EAAElB,OAAQ,OAAQ,IAClC3D,SAAAA,SAAA2E,KAAA,SAAAC,EAAAC,GACN,GAAAD,EAAAjB,OAAAkB,EAAAlB,OAAA,OAAA,IAEAnC,gBAAgBf,UAAUqE,OAAO,UAEjC5D,YAAYlB","file":"main.min.js","sourcesContent":["const api = `https://5ebbb8e5f2cfeb001697d05c.mockapi.io/users`\r\n\r\nfetch(api)\r\n    .then(res => {\r\n        if (res.ok) {\r\n            return res.json()\r\n        } else {\r\n            alert('Что то пошло не так :(')\r\n        }\r\n    })\r\n    .then(data => {\r\n        userData = data\r\n        \r\n    })\r\n","function deleteUser(data) {\r\n\r\n    let deleteItem = document.querySelectorAll('.js-delete-item')\r\n    let attr\r\n\r\n    deleteItem.forEach((item, idx) => {\r\n\r\n        item.addEventListener('click', () => {\r\n            attr = item.getAttribute('data-attr')\r\n            modal.classList.add('modal_active')\r\n        })\r\n\r\n    })\r\n\r\n    modalBtn.forEach((item, idx) => {\r\n\r\n        item.addEventListener('click', () =>{\r\n            \r\n            if (idx == 1) {\r\n                modal.classList.remove('modal_active')\r\n            } else {\r\n                modal.classList.remove('modal_active')\r\n                data = data.filter(item => item.id != attr)\r\n                userData = data\r\n                userSearch = userSearch.filter(item => item.id != attr)\r\n                rerenderApp(data)\r\n            }\r\n\r\n        })\r\n    })\r\n}\r\n","\"use strict\";\r\n\r\nlet searchInput = document.querySelector('.js-search-input'),\r\n    searchResetBtn = document.querySelector('.js-search-reset-btn'),\r\n    sortableBtnDate = document.querySelector('.js-sortable-btn-date'),\r\n    sortableBtnRating = document.querySelector('.js-sortable-btn-rating'),\r\n    modal = document.querySelector('.js-modal'),\r\n    modalBtn = document.querySelectorAll('.js-modal-btn'),\r\n    template = document.querySelector('#template').content.querySelector('tr'),\r\n    element = document.querySelector('.js-users'),\r\n    pageCounter = document.querySelector('#template2').content.querySelector('li'),\r\n    pagination = document.querySelector('.js-pagination'),\r\n    userData,\r\n    perPage = 5,\r\n    keyUser = 0,\r\n    countPage = 0,\r\n    userList,\r\n    userSearch\r\n\r\nsetTimeout(() => {\r\n    userSearch = userData\r\n    rerenderApp(userData)\r\n}, 700)\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","function paginateRender(data) {\r\n\r\n    userList = data,\r\n    countPage = Math.ceil(userList.length / 5)\r\n\r\n    function paginate(i) {\r\n        let pageItem = pageCounter.cloneNode(true)\r\n        pageItem.querySelector('.js-page-number').textContent = i\r\n        return pageItem\r\n    }\r\n\r\n    let fragment = document.createDocumentFragment()\r\n    pagination.innerHTML= ''\r\n\r\n    for (let i = 1; i < countPage + 1; i++) {\r\n        fragment.appendChild(paginate(i))\r\n    }\r\n \r\n    pagination.appendChild(fragment)\r\n    \r\n    clickPagination()\r\n}\r\n\r\nfunction clickPagination() {\r\n    let paginationBtn = document.querySelectorAll('.js-page-number')\r\n    paginationBtn.forEach(element => {\r\n        element.addEventListener('click', (e) => {\r\n            e.preventDefault()\r\n            let index = e.target.innerHTML\r\n            let stepPaginate = 5\r\n    \r\n            if (e.target.classList.contains('js-page-number')) {\r\n                \r\n                if (index== 1) {\r\n                    keyUser = 0\r\n                    perPage = 5\r\n                } else {\r\n                    perPage = index*stepPaginate\r\n                    keyUser = (index-1)*stepPaginate\r\n                }\r\n        \r\n                rerenderApp(userData)\r\n            }\r\n        })\r\n    });\r\n    \r\n}","function renderUserList(data) {\r\n\r\n    userList = data.slice(keyUser, perPage)\r\n    \r\n    function createUserList(i, data) {\r\n\r\n        let userItem = template.cloneNode(true)\r\n        \r\n        let date = data[i].registration_date.split('T')[0]\r\n    \r\n        userItem.querySelector('.js-delete-item').setAttribute('data-attr', data[i].id)\r\n        userItem.querySelector('.js-username').textContent = data[i].username\r\n        userItem.querySelector('.js-email').textContent = data[i].email\r\n        userItem.querySelector('.js-date').textContent = date\r\n        userItem.querySelector('.js-rating').textContent = data[i].rating\r\n    \r\n        return userItem\r\n    \r\n    }\r\n\r\n    let fragment = document.createDocumentFragment()\r\n    element.innerHTML= ''\r\n\r\n    userList.forEach((item, idx) => {\r\n        fragment.appendChild(createUserList(idx, userList))\r\n    })\r\n    \r\n    element.appendChild(fragment)\r\n\r\n}\r\n","function rerenderApp(data){\r\n    renderUserList(data)\r\n    paginateRender(data)\r\n    deleteUser(data)\r\n\r\n}","function getOptions(word) {\r\n    return userSearch.filter(u => {\r\n        const regex = new RegExp(word, 'gi')\r\n        return u.username.match(regex)\r\n    })\r\n}    \r\n\r\nfunction displayOptions(value) {\r\n    if (value!= '') {\r\n        searchResetBtn.classList.add('search__reset-button_active')\r\n    }\r\n    userData = getOptions(value)\r\n    rerenderApp(userData)\r\n}\r\n\r\nsearchInput.addEventListener('keyup', () => {\r\n    keyUser = 0\r\n    perPage = 5\r\n    displayOptions(searchInput.value)\r\n})\r\n\r\nsearchResetBtn.addEventListener('click', (event) =>{\r\n    event.preventDefault()\r\n    searchInput.value = ''\r\n    displayOptions(searchInput.value)\r\n    rerenderApp(userData)\r\n    searchResetBtn.classList.remove('search__reset-button_active')\r\n})\r\n","function numberFormat(arr) {\r\n\r\n    arr = Number(arr.split('T')[0].split('-').join(''))\r\n\r\n    return arr\r\n}\r\n\r\nsortableBtnDate.addEventListener('click', () => {\r\n\r\n    sortableBtnDate.classList.add('sortable__button_active')\r\n    sortableBtnRating.classList.remove('sortable__button_active')\r\n    searchResetBtn.classList.add('search__reset-button_active')\r\n    if(!sortableBtnDate.classList.contains('active')) {\r\n        userData = userData.sort((a, b) => {\r\n            if (numberFormat(a.registration_date) > numberFormat(b.registration_date)) return -1\r\n        })\r\n    } else {\r\n        userData = userData.sort((a, b) => {\r\n            if (numberFormat(a.registration_date) < numberFormat(b.registration_date)) return -1\r\n        })\r\n    }\r\n\r\n    sortableBtnDate.classList.toggle('active')\r\n\r\n    rerenderApp(userData)\r\n})\r\n\r\nsortableBtnRating.addEventListener('click', () => {\r\n\r\n    sortableBtnRating.classList.add('sortable__button_active')\r\n    sortableBtnDate.classList.remove('sortable__button_active')\r\n    searchResetBtn.classList.add('search__reset-button_active')\r\n    if (!sortableBtnDate.classList.contains('active')) {\r\n        userData = userData.sort((a, b) => {\r\n            if(a.rating > b.rating) return -1\r\n        })\r\n    } else {\r\n        userData = userData.sort((a, b) => {\r\n            if(a.rating < b.rating) return -1\r\n        })\r\n    }\r\n\r\n    sortableBtnDate.classList.toggle('active')\r\n\r\n    rerenderApp(userData)\r\n})\r\n\r\n"]}